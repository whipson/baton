---
title: "Introduction"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{maestro-introduction}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, echo = FALSE}
library(DiagrammeR)
```

# Glossary of terms

- frequency
- interval
- pipeline
- schedule
- orchestrator



# General Workflow

Steps

  - create R project
  - create orchestrator script
  - create new pipeline script(s)
  - deploy orchestrator and pipelines
  
  

# What is an Orchestrator

```{r diagram, fig.width = 10, fig.height = 8, echo = FALSE}
DiagrammeR::mermaid("
        graph TD
          A[orchestrator]-->B[hourly]
          A[orchestrator]-->C[daily]
          A[orchestrator]-->D[weekly]
          A[orchestrator]-->E[monthly]
          B[hourly]-->B1[pipe1<br>every hour<br>at 06:05]
          B[hourly]-->B2[pipe2<br>every hour<br>at 11:15]
          B[hourly]-->B3[pipe3<br>every 6 hours<br>at 02:00]
          C[daily]-->C1[pipe4<br>every day<br>at 15:35]
          C[daily]-->C2[pipe5<br>every day<br>at 06:05]
          D[weekly]-->D1[pipe6<br>every week<br>on Monday<br>at 22:50]
          D[weekly]-->D2[pipe7<br>every week<br>on Thursday<br>at 02:30]
          D[weekly]-->D3[pipe8<br>every 2 weeks<br>on Monday<br>at 18:45]
          E[monthly]-->E1[pipe9<br>every month<br>on the 1st day<br>at 12:15]
          E[monthly]-->E2[pipe10<br>every 6 months<br>on the 15th day<br>at 23:55]
        ")
```



# Overview
A data pipeline is a crucial concept for anyone working with data, from analysts to seasoned data scientists. At its core, a data pipeline is a series of steps designed to efficiently and systematically handle and transform data from its raw form into usable information. Think of a data pipeline as a factory assembly line where data is the raw material. As this data travels along the pipeline, it undergoes various transformations—such as cleaning, aggregation, and analysis—making it increasingly refined and valuable.

An essential aspect of data pipelines is scheduling. Automated schedules ensure data processes are reliable and executed in a timely manner, without requiring manual intervention. This is key for scalability, as it allows systems to handle increasing amounts of data efficiently. Scheduling also supports consistent automation, minimizing errors and maximizing the productivity.

`maestro` allows R users to write data pipeline using conventional R methods and syntax that can be automated via a scheduled orcherstrator.

<br>

## Decorators
A decorator is a special tag that precedes the pipeline script that indicates how they should be interpreted and processed. `maestro` uses decorators to identify how to schedule the pipeline with the orchestrator. Below are the main decorators that are used to build a schedule for use within the orchestrator.

<br>

### Maestro Frequency
The `@maestroFrequency` tag identifies when the pipeline runs. `@maestroFrequency` requires one of the following parameters `minute, hour, day, week, month, quarter, year`.

An example of using this tag is `@maestroFrequency day`

<br>

### Maestro Interval
The `@maestroInterval` tag works in conjunction with `@maestroFrequency` to indicate how often the pipeline is to run. `@maestroInterval` requires a whole number as a parameter.

An example of using this tag is `@maestroInterval 1`. `@maestroInterval 1` combined with `@maestroFrequency day` would run the pipeline everyday, where as `@maestroInterval 3` combined with `@maestroFrequency day` would run the pipeline every three days.

<br>

### Maestro Start Time
The `@maestroStartTime` tag identifies when the pipeline runs for the first time. The tag is also used in conjunction with `@maestroFrequency` and `@maestroInterval` to calculate when the pipeline is to run next. `@maestroStartTime` requires a datetime parameter using the `yyyy-mm-dd hh:mm:ss` format.

An example of using this tag is `@maestroStartTime 2024-04-25 05:45:00`

<br>

### Maestro Timezone
The `@maestroTz` tag identifies what timezone is to be used when scheduling the pipeline. `@maestroTz` requires a single parameter based on timezones from the `OlsonNames` R function.

An example of using this tag is `@maestroTz America/Halifax`

<br>

### Maestro Skip
The `@maestroSkip` tag provides the option for a pipeline to be ignored in the creation of the orchestration schedule, which is helpful for pipelines that are in development. `@maestroSkip` can be added to the script without any parameter values.

An example of using this tag is `@maestroSkip`

<br>









